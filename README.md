# Конспект по The Twelve-Factor App

Источник: https://www.12factor.net/ru/

# Содержание

- [Введение](#введение)
- [Двенадцать факторов](#двенадцать-факторов)

# Введение

В наши дни программное обеспечение обычно распространяется в виде сервисов, называемых веб-приложения (web apps) или software-as-a-service (SaaS). `The Twelve-Factor App` &mdash; это методология для создания SaaS-приложений, которые:

- используют декларативный формат для описания процесса установки и настройки, что сводит к минимуму затраты времени и ресурсов для новых разработчиков, подключенных к проекту;
- имеют соглашение с операционной системой, предполагающее максимальную переносимость между средами выполнения;
- подходят для развертывания на современных облачных платформах, устраняя необходимость в серверах и системном администрировании;
- сводят к минимуму расхождения между средой разработки и средой выполнения, что позвалает использовать непрерывное развертывание (continuous deployment) для максимальной гибкости;
- и могут масштабироваться без существенных изменений в инструментах, архитектуре и практике разработки.

Методология `The Twelve-Factor App` может быть применена для приложений, написанных на любом языке программирования и использующих любые комбинации сторонних служб (backing services) (базы данных, очереди сообщений, кэш-памяти, и т.д.).

# Двенадцать факторов

1. [**Кодовая база**](#кодовая-база)
    
    Одна кодовая база, отслеживаемая в системе контроля версий, &ndash; множество развертываний.

2. **Зависимости**

    Явно объявляйте и изолируйте зависимости.

3. **Конфигурация**

    Сохраняйте конфигурацию в среде выполнения.

4. **Сторонние службы (Backing Services)**

    Считайте подключаемые службы (backing services) сторонними ресурсами.

5. **Сборка, релиз, выполнение**

    Строго разделяйте стадии сборки и выполнения.

6. **Процессы**

    Запускайте приложение как один или несколько процессов не сохраняющих внутренее состояние (stateless).

7. **Привязка портов (Port binding)**

    Экспортируйте сервисы через привязку портов.

8. **Параллелизм**

    Масштабируйте приложение с помощью процессов.

9. **Утилизируемость (Disposability)**

    Максимизируйте надежность с помощью быстрого запуска и корректного завершения работы.

10. **Паритет разработки/работы приложения**

    Держите окружения разработки, промежуточного развертывания (staging) и рабочего развертывания (production) максимально похожими.

11. **Журналирование (Logs)**

    Рассматривайте журнал как поток событий.

12. **Задачи администрирования**

    Выполняйте задачи администрирования/управления с помощью разовых процессов.

# Кодовая база

### Одна кодовая база, отслеживаемая в системе контроля версий, &ndash; множество развертываний.

`The Twelve-Factor App` всегда отслеживается в системе контроля версий, такой как [Git](http://git-scm.com/), [Mercurial](https://www.mercurial-scm.org/) или [Subversion](http://subversion.apache.org/). Копия базы данных отслеживаемых версий называется репозиторем кода (code repository).

`Кодовая база` &mdash; это один репозиторий (в централизованных системах контроля версий, как Subversion) или множество репозиториев, имеющих общие начальные коммиты (в децентрализованных системах контроля версий, как Git).

Всегда есть однозначное соответствие между кодовой базой и приложением: 

- Если есть множество кодовых баз, то это не приложение &mdash; это распределенная система. Каждый компонент в распределенной системе является приложением и каждый компонент может индивидуально соответствовать `The Twelve-Factor App`; 
- Факт того, что несколько приложений совместно используют тот же самый код, является нарушением `The Twelve-Factor App`. Решением в данной ситуации является выделение общего кода в библиотеки, которые могут быть подключены через менеджер зависимостей. 

![](codebase-deploys.png);

Существует только одна кодовая база для приложения, но может быть множество развертываний одного и того же приложения. *Развернутым приложением (deploy)* является запущенный экземпляр приложения. Как правило, это рабочее развертывание сайта и одно или несколько промежуточных развертываний сайта. Кроме того каждый разработчик имеет копию приложения, запущенного в его локальном окружении разработки, каждая из которых также квалифицируется как развернутое приложение (deploy).

Кодовая база обязана быть единой для всех развертываний, однако разные версии одной кодовой базы могут выполняться в каждом из развертываний. Например, разработчик может иметь некоторые изменения, которые еще не добавлены в промежуточное развертывание; промежуточное развертывание может иметь изменения, которые еще не добавлены в рабочее развертывание. Однако все эти развертывания используют одну и ту же кодовую базу, таким образом можно их идентифицировать как разные развертывания одного и того же приложения.